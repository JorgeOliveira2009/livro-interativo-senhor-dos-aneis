// ==================== Interfaces ====================
interface IEscolha {
  texto: string;
  proximaPagina: number;
}

interface IPagina {
  id: number;
  texto: string;
  escolhas: IEscolha[];
  proximaPagina?: number;
  executar(): number | null;
}

// ==================== Itens ====================
abstract class BaseItem {
  constructor(public nome: string, public consumivel: boolean = true) {}

  abstract usar(): void;
}

class Arma extends BaseItem {
  constructor(nome: string, public dano: number) {
    super(nome, false);
  }

  usar(): void {
    console.log(`‚öîÔ∏è Voc√™ ataca com ${this.nome}, causando ${this.dano} de dano!`);
  }
}

// ==================== Personagens ====================
abstract class Personagem {
  constructor(public nome: string, public arma: Arma) {}

  abstract habilidadeEspecial(): void;

  atacar(): void {
    this.arma.usar();
  }
}

class Nazgul extends Personagem {
  constructor() {
    super("Nazg√ªl", new Arma("L√¢mina envenenada", 20));
  }
  habilidadeEspecial(): void {
    console.log("‚ò†Ô∏è O medo paralisa suas a√ß√µes!");
  }
}

class Orc extends Personagem {
  constructor() {
    super("Orc", new Arma("Machado enferrujado", 10));
  }
  habilidadeEspecial(): void {
    console.log("üíÄ O orc grita e chama refor√ßos!");
  }
}

class Balrog extends Personagem {
  constructor() {
    super("Balrog", new Arma("Chicote de fogo", 50));
  }
  habilidadeEspecial(): void {
    console.log("üî• O Balrog envolve tudo em chamas!");
  }
}

class OrcMarinho extends Personagem {
  constructor() {
    super("Orc Marinho", new Arma("Tridente de Orc Marinho", 15));
  }
  habilidadeEspecial(): void {
    console.log("üåä Orc Marinho tenta puxar voc√™ para as profundezas!");
  }
}

class UrukHai extends Personagem {
  constructor() {
    super("Uruk-hai", new Arma("Espada Longa", 20));
  }
  habilidadeEspecial(): void {
    console.log("‚öîÔ∏è Uruk-hai investe com for√ßa brutal!");
  }
}

class Shelob extends Personagem {
  constructor() {
    super("Shelob", new Arma("Veneno mortal", 30));
  }
  habilidadeEspecial(): void {
    console.log("üï∑Ô∏è Shelob lan√ßa teias venenosas!");
  }
}

// ==================== P√°ginas Base ====================
abstract class PaginaBase implements IPagina {
  constructor(
    public id: number,
    public texto: string,
    public escolhas: IEscolha[] = [],
    public proximaPagina?: number
  ) {}

  abstract executar(): number | null;

  protected mostrarEscolhas(): void {
    if (this.escolhas.length === 0) return;
    console.log("\n--- Suas Op√ß√µes ---");
    this.escolhas.forEach((escolha, index) => {
      console.log(`${index + 1}. ${escolha.texto}`);
    });
  }
}

class PaginaBatalha extends PaginaBase {
  constructor(
    id: number,
    texto: string,
    public inimigo: Personagem,
    public recompensa: BaseItem[] = [],
    proximaPagina?: number
  ) {
    super(id, texto, [], proximaPagina);
  }

  executar(): number | null {
    console.log("\n" + this.texto);
    console.log(`Enfrentando: ${this.inimigo.nome}!`);
    this.inimigo.atacar();
    this.inimigo.habilidadeEspecial();
    console.log("‚ú® Voc√™ venceu a batalha!");
    if (this.recompensa.length > 0) {
      this.recompensa.forEach((itm) => console.log(`Voc√™ recebeu: ${itm.nome}`));
    }
    return this.proximaPagina ?? null;
  }
}

class PaginaExploracao extends PaginaBase {
  executar(): number | null {
    console.log("\n" + this.texto);
    this.mostrarEscolhas();
    return null;
  }
}

class PaginaMorte extends PaginaBase {
  executar(): number | null {
    console.log("\n‚ò†Ô∏è " + this.texto);
    return null;
  }
}

// ==================== Cria√ß√£o das p√°ginas ====================
const paginas: Record<number, IPagina> = {};

// Fun√ß√£o auxiliar para inserir p√°ginas (facilita manter tudo organizado)
function addPagina(p: IPagina) {
  paginas[p.id] = p;
}

// P√°gina 1 a 10 (in√≠cio)
addPagina(
  new PaginaExploracao(
    1,
    "Voc√™ √© Frodo Baggins, vivendo pacatamente no Condado. √â uma manh√£ calma, mas algo inquietante paira no ar. Gandalf chega, ofegante e preocupado. Ele lhe conta sobre o poder do Anel e o perigo que se aproxima: se permanecer com voc√™, for√ßas sombrias ir√£o atr√°s. Voc√™ sente o peso da responsabilidade e o medo cresce em seu peito. O que fazer diante desta not√≠cia avassaladora?",
    [
      { texto: "Aceitar a miss√£o de levar o Anel para fora do Condado, junto de Sam", proximaPagina: 2 },
      { texto: "Ignorar Gandalf e permanecer no Condado, tentando a vida normal", proximaPagina: 99 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    2,
    "Voc√™ e Sam preparam-se para partir. A luz da manh√£ atravessa as √°rvores, mas voc√™ sente olhos invis√≠veis observando. Cada passo em dire√ß√£o √† sa√≠da do Condado aumenta o peso do Anel e a ansiedade sobre o que est√° por vir. Voc√™s podem seguir por caminhos diferentes: pelo campo aberto, que √© mais r√°pido, ou pela floresta, que oferece sombras e prote√ß√£o, mas √© desconhecida e cheia de perigos.",
    [
      { texto: "Seguir pelo campo aberto, confiando na rapidez", proximaPagina: 3 },
      { texto: "Seguir pela floresta, buscando prote√ß√£o e sombras", proximaPagina: 4 }
    ]
  )
);

addPagina(new PaginaMorte(3, "Ao atravessar o campo aberto, o vento leva o cheiro do Anel aos Nazg√ªl. Eles aparecem de repente, e o medo o paralisa. Voc√™ √© capturado e o Condado cai nas m√£os de Sauron."));

addPagina(
  new PaginaExploracao(
    4,
    "Entrar na floresta traz al√≠vio imediato. As √°rvores s√£o altas e densas, escondendo voc√™ e Sam dos olhares sombrios. Voc√™s ouvem o canto dos p√°ssaros, mas a sensa√ß√£o de persegui√ß√£o nunca desaparece. Durante a caminhada, encontram Merry e Pippin, que insistem em acompanh√°-los. Juntos, o grupo tem mais chance de escapar, mas tamb√©m aumenta a responsabilidade.",
    [
      { texto: "Seguir viagem at√© a estalagem em Bri, buscando abrigo", proximaPagina: 5 },
      { texto: "Parar para descansar perto de uma colina, aproveitando a seguran√ßa tempor√°ria", proximaPagina: 98 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    5,
    "A estalagem em Bri parece acolhedora, mas a atmosfera √© tensa. Um homem misterioso observa voc√™s atentamente. Cada passo dentro do sal√£o faz o cora√ß√£o acelerar. Ser√° amigo ou inimigo? A escolha que voc√™ fizer pode determinar o destino da jornada.",
    [
      { texto: "Aproximar-se do homem e falar com ele, tentando descobrir suas inten√ß√µes", proximaPagina: 6 },
      { texto: "Ignorar o homem e sair sozinho, confiando apenas em Sam e seus amigos", proximaPagina: 97 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    6,
    "O homem se apresenta como Aragorn, um guia experiente e protetor. Ele oferece ajuda para proteger o grupo dos perigos que se aproximam. Mesmo com desconfian√ßa, voc√™ percebe que precisar√° de aliados para atravessar as terras cheias de inimigos. O que decidir?",
    [
      { texto: "Confiar em Aragorn e aceitar sua ajuda", proximaPagina: 7 },
      { texto: "Recusar a ajuda e seguir por conta pr√≥pria", proximaPagina: 96 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    7,
    "Com Aragorn guiando, voc√™s seguem viagem. O vento noturno traz um cheiro met√°lico e sinistro. Algo se aproxima... os Nazg√ªl est√£o por perto. Eles podem atacar a qualquer momento. Voc√™s precisam decidir se se escondem ou enfrentam diretamente o perigo.",
    [
      { texto: "Esconder-se em Amon S√ªl, utilizando a colina como prote√ß√£o", proximaPagina: 8 },
      { texto: "Enfrentar os Nazg√ªl, confiando na coragem do grupo", proximaPagina: 95 }
    ]
  )
);

addPagina(
  new PaginaBatalha(
    8,
    "Os Nazg√ªl atacam durante a noite em Amon S√ªl. Voc√™ sente o frio do medo, mas Aragorn mant√©m o grupo firme. Uma batalha intensa ocorre, e o perigo √© real. A sorte parece sorrir, e voc√™s conseguem escapar, mas n√£o sem ferimentos.",
    new Nazgul(),
    [new Arma("Adaga de Gondor", 12)],
    9
  )
);

addPagina(
  new PaginaExploracao(
    9,
    "Frodo sente a dor de uma l√¢mina envenenada, mas Aragorn age rapidamente, guiando voc√™s para fora do perigo imediato. Cada passo √© pesado, e o cansa√ßo toma conta. Voc√™s precisam decidir se seguem imediatamente ou descansam um pouco antes de continuar a viagem.",
    [{ texto: "Seguir viagem com urg√™ncia, sem perder tempo", proximaPagina: 10 }]
  )
);

addPagina(
  new PaginaExploracao(
    10,
    "Voc√™s chegam a Valfenda. Elrond, preocupado com o peso do Anel sobre Frodo, oferece cuidados e abrigo. No Conselho de Elrond, representantes de v√°rias ra√ßas debatem sobre o destino do Anel. A decis√£o que voc√™ tomar agora moldar√° o curso da hist√≥ria.",
    [
      { texto: "Aceitar fazer parte da Sociedade do Anel e partir para destruir o Anel", proximaPagina: 11 },
      { texto: "Recusar a miss√£o, temendo os perigos", proximaPagina: 94 }
    ]
  )
);

// P√°gina 11 em diante (restante do livro)
addPagina(
  new PaginaExploracao(
    11,
    "A Sociedade parte de Valfenda. A viagem √© longa, atravessando florestas densas e vales silenciosos. Frodo sente o Anel cada vez mais pesado, quase como se estivesse vivo, pressionando sua mente e sua vontade. O grupo discute qual caminho tomar: a travessia de Caradhras, a montanha nevada, ou o caminho por Moria, escuro e perigoso. Cada decis√£o carrega riscos e incertezas.",
    [
      { texto: "Tentar atravessar Caradhras, confiando na velocidade", proximaPagina: 12 },
      { texto: "Seguir direto para Moria, mesmo desconhecendo os perigos subterr√¢neos", proximaPagina: 15 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    12,
    "A subida de Caradhras come√ßa bem, mas logo uma nevasca violenta cobre o grupo. A neve √© trai√ßoeira, tornando cada passo um risco. O frio corta a pele, e o vento parece sussurrar amea√ßas invis√≠veis. A travessia parece imposs√≠vel, e o tempo est√° contra voc√™s.",
    [
      { texto: "Desistir e procurar a entrada de Moria", proximaPagina: 15 },
      { texto: "Persistir e tentar atravessar a montanha mesmo com o perigo iminente", proximaPagina: 13 }
    ]
  )
);

addPagina(new PaginaMorte(13, "O vento e a neve se tornam incontrol√°veis. Voc√™ escorrega em uma encosta e √© arrastado para um penhasco gelado. A montanha engole aqueles que insistem em desafi√°-la."));

addPagina(
  new PaginaExploracao(
    15,
    "Voc√™s chegam √† entrada oculta de Moria. O ambiente √© sombrio e silencioso, com ecos que fazem a coragem de todos vacilar. As portas antigas exigem a senha de entrada, mas o conhecimento dela n√£o √© garantido. Cada passo em Moria pode trazer surpresas, e o perigo √© constante.",
    [
      { texto: "Tentar falar a palavra 'Amigo' em √©lfico, confiando no conhecimento", proximaPagina: 16 },
      { texto: "For√ßar a entrada, quebrando a porta", proximaPagina: 93 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    16,
    "As portas se abrem silenciosamente. Voc√™s entram e a escurid√£o os envolve. O ar √© pesado, √∫mido, e cada ru√≠do ecoa pelos corredores de pedra. Sons met√°licos de passos distantes indicam que orcs ainda habitam este lugar. Voc√™s precisam escolher se avan√ßam pelo caminho principal ou procuram passagens laterais, mais seguras mas mais longas.",
    [{ texto: "Avan√ßar pelo caminho principal, mesmo arriscado", proximaPagina: 17 }]
  )
);

addPagina(
  new PaginaBatalha(
    17,
    "Orcs aparecem em bando! O som de suas vozes √© assustador. Frodo sente o Anel quase pulsando em sua m√£o, como se amplificasse o perigo. A luta √© inevit√°vel, mas cada golpe que voc√™ d√° √© essencial para sobreviver e proteger os amigos.",
    new Orc(),
    [new Arma("Espada Curta", 10)],
    18
  )
);

addPagina(
  new PaginaExploracao(
    18,
    "Voc√™s escapam dos orcs feridos, mas a tens√£o aumenta: um rugido sombrio reverbera pelo corredor. Um Balrog desperta nas profundezas de Moria. O ch√£o treme e as chamas iluminam a escurid√£o. Cada passo agora pode ser fatal. O que fazer diante de um inimigo de poder inimagin√°vel?",
    [
      { texto: "Enfrentar o Balrog junto de Gandalf", proximaPagina: 19 },
      { texto: "Tentar fugir sem lutar, esperando se esconder nas sombras", proximaPagina: 92 }
    ]
  )
);

addPagina(
  new PaginaBatalha(
    19,
    "üî• Gandalf se posiciona na ponte, encarando o Balrog. Ele grita comandos e for√ßa a passagem. O fogo e a sombra se misturam. Frodo sente o peso do Anel aumentando, mas a coragem surge. A batalha √© intensa, mas a estrat√©gia e a uni√£o podem salvar todos.",
    new Balrog(),
    [],
    20
  )
);

addPagina(
  new PaginaExploracao(
    20,
    "Gandalf cai no abismo junto com o Balrog, e o grupo fica em choque. Voc√™s conseguem sair de Moria, mas a perda pesa no cora√ß√£o de todos. Cada passo √© agora um lembrete de que o caminho √© longo e perigoso, mas a miss√£o deve continuar. A escolha √© seguir diretamente at√© Lorien ou descansar e planejar a viagem com mais cuidado.",
    [
      { texto: "Seguir viagem imediatamente at√© Lorien", proximaPagina: 21 },
      { texto: "Descansar pr√≥ximo ao rio e organizar suprimentos", proximaPagina: 91 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    21,
    "Voc√™s entram na floresta dourada de Lothl√≥rien, e a atmosfera muda: o ar √© leve, a luz parece brilhar atrav√©s das √°rvores de uma forma m√°gica. Sam observa maravilhado, mas voc√™ sente o peso do Anel ainda mais presente. Elfos silenciosos os observam das sombras, e uma sensa√ß√£o de paz e vigil√¢ncia os envolve. Galadriel, a Senhora da Floresta, surge diante do grupo, oferecendo ajuda e conselhos. O que fazer?",
    [
      { texto: "Aceitar a orienta√ß√£o de Galadriel e ouvir seus conselhos", proximaPagina: 22 },
      { texto: "Ignorar e continuar a viagem por conta pr√≥pria", proximaPagina: 90 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    22,
    "Galadriel oferece um presente a cada membro da Sociedade. Ela olha profundamente em seus olhos e oferece algo especial, que pode ser √∫til na jornada: uma lembran√ßa da floresta ou uma prote√ß√£o contra o mal. O presente pode fazer a diferen√ßa em momentos cr√≠ticos. Sam sussurra que devemos aceitar com cuidado, pensando no futuro. O que escolher?",
    [
      { texto: "Aceitar a lembran√ßa que Galadriel oferece para Frodo", proximaPagina: 23 },
      { texto: "Recusar, confiando apenas na sua pr√≥pria sorte e coragem", proximaPagina: 89 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    23,
    "Com os presentes e b√™n√ß√£os de Galadriel, voc√™s seguem para o cais da floresta. A travessia do Rio Anduin √© necess√°ria, e a escolha do caminho √© crucial: pegar uma embarca√ß√£o r√°pida, mas vis√≠vel, ou uma menor e silenciosa, arriscando ficar presos em correntes trai√ßoeiras. Cada decis√£o pode atrair olhares perigosos ou garantir seguran√ßa tempor√°ria.",
    [
      { texto: "Escolher a embarca√ß√£o r√°pida, arriscando ser visto", proximaPagina: 24 },
      { texto: "Escolher a pequena e silenciosa canoa, arriscando as correntes", proximaPagina: 25 }
    ]
  )
);

addPagina(new PaginaMorte(24, "O barco r√°pido chama aten√ß√£o dos Orcs nas margens do rio. Eles atacam sem aviso. A embarca√ß√£o vira, e a correnteza leva Frodo para as profundezas. O Anel quase escapa tamb√©m, mas a miss√£o termina aqui."));

addPagina(
  new PaginaExploracao(
    25,
    "A canoa pequena desliza silenciosamente pelas √°guas escuras. O grupo observa os arredores com cautela, sentindo a presen√ßa de inimigos invis√≠veis. Cada remada exige concentra√ß√£o, e o cansa√ßo aumenta. Voc√™s avistam uma ilha √† frente: parece segura para descansar, mas o tempo urge, e cada minuto conta.",
    [
      { texto: "Desembarcar na ilha para descanso r√°pido", proximaPagina: 26 },
      { texto: "Continuar o percurso sem parar, mesmo cansados", proximaPagina: 88 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    26,
    "Na ilha, voc√™s percebem pegadas estranhas na areia e sinais de criaturas pr√≥ximas. A floresta ao redor parece esconder algo sinistro. A escolha agora √© seguir explorando para descobrir se h√° perigo ou continuar a viagem sem investigar, mas com risco de serem surpreendidos.",
    [
      { texto: "Investigar as pegadas estranhas, atentos a qualquer armadilha", proximaPagina: 27 },
      { texto: "Ignorar e seguir viagem imediatamente", proximaPagina: 87 }
    ]
  )
);

addPagina(
  new PaginaBatalha(
    27,
    "Voc√™s encontram um pequeno grupo de Orcs escondido na ilha. Eles atacam rapidamente, mas a surpresa favorece voc√™s. A luta √© intensa, e cada golpe pode salvar ou condenar o grupo.",
    new Orc(),
    [new Arma("Faca √âlfica", 8)],
    28
  )
);

addPagina(
  new PaginaExploracao(
    28,
    "Ap√≥s derrotar os Orcs, a ilha parece segura. Voc√™s descansam e Sam tenta levantar o moral do grupo, lembrando que a jornada ainda n√£o acabou. Olhando para o rio, percebem que a travessia restante exige aten√ß√£o: h√° correntezas fortes e criaturas que podem atacar na √°gua. Como prosseguir?",
    [
      { texto: "Navegar cuidadosamente pelo centro do rio, enfrentando as correntes", proximaPagina: 29 },
      { texto: "Seguir pela margem, pr√≥ximo √†s √°rvores, usando cobertura", proximaPagina: 86 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    29,
    "Voc√™s escolhem navegar pelo centro do rio. Cada remada √© exaustiva, mas o progresso √© vis√≠vel. O cansa√ßo aperta, e a ansiedade aumenta. De repente, sombras sobem das √°guas: criaturas malignas espreitam, atra√≠das pelo poder do Anel. A decis√£o deve ser r√°pida.",
    [
      { texto: "Enfrentar as criaturas com coragem, lutando para proteger todos", proximaPagina: 30 },
      { texto: "Tentar se esconder na √°gua e passar despercebido", proximaPagina: 85 }
    ]
  )
);

addPagina(
  new PaginaBatalha(
    30,
    "Voc√™s enfrentam as criaturas aqu√°ticas em uma luta desesperada. O Anel brilha intensamente, quase revelando sua presen√ßa aos inimigos. Cada movimento √© vital para sobreviv√™ncia do grupo e sucesso da miss√£o.",
    new OrcMarinho(),
    [],
    31
  )
);

addPagina(
  new PaginaExploracao(
    31,
    "Ap√≥s atravessar o Anduin, o grupo segue em dire√ß√£o a Rohan. O caminho leva voc√™s √† floresta antiga de Fangorn. √Årvores gigantescas e antigas cercam o caminho, e sons estranhos ecoam. Sam comenta sobre a sensa√ß√£o de estar sendo observado. Cada passo parece carregado de mist√©rio e perigo, e voc√™s sentem que n√£o est√£o sozinhos.",
    [
      { texto: "Seguir pelo caminho principal, tentando ignorar os sons", proximaPagina: 32 },
      { texto: "Investigar a floresta em busca da origem dos sons", proximaPagina: 34 }
    ]
  )
);

addPagina(new PaginaMorte(32, "Ao ignorar os sons e seguir pelo caminho, √°rvores antigas se movimentam de forma inesperada. Ents, confundidos com intrusos, atacam o grupo. Sem defesa suficiente, voc√™s s√£o esmagados pelas ra√≠zes gigantes e troncos."));

addPagina(
  new PaginaExploracao(
    34,
    "Voc√™s descobrem que os sons eram Ents despertando. Faramir, uma figura de esperan√ßa, aparece para gui√°-los e evitar mal-entendidos. O grupo percebe que a prud√™ncia vale mais que a pressa. Continuar pelo bosque exige escolhas cuidadosas.",
    [
      { texto: "Agradecer a Faramir e seguir o caminho seguro pelo bosque", proximaPagina: 35 },
      { texto: "Ignorar o aviso e correr por atalhos arriscados", proximaPagina: 84 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    35,
    "Voc√™s chegam a Rohan. As plan√≠cies vastas se estendem √† frente, mas h√° sinais de ataque recente de Saruman: aldeias queimadas, campos abandonados e o vento carregando o cheiro de destrui√ß√£o. A escolha agora √© seguir direto para Edoras, a capital, ou ajudar os alde√µes antes de prosseguir.",
    [
      { texto: "Ir direto para Edoras, buscando reunir aliados com Th√©oden", proximaPagina: 36 },
      { texto: "Ajudar os alde√µes, arriscando atrasar a miss√£o", proximaPagina: 83 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    36,
    "Chegando em Edoras, voc√™s encontram Th√©oden, o rei de Rohan, manipulados por Gr√≠ma. O clima √© tenso. Gandalf, agora recuperado, tenta ajudar a despertar a coragem do rei. Voc√™s devem escolher como agir: apoiar Gandalf diretamente ou tentar influenciar Th√©oden com suas palavras.",
    [
      { texto: "Seguir Gandalf e ajud√°-lo a despertar o rei", proximaPagina: 37 },
      { texto: "Tentar convencer Th√©oden por conta pr√≥pria", proximaPagina: 82 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    37,
    "Gandalf enfrenta Saruman mentalmente atrav√©s da influ√™ncia sobre Th√©oden. O rei desperta do feiti√ßo, e os cavaleiros de Rohan se preparam para a batalha contra o ex√©rcito de Saruman. Voc√™s precisam decidir se acompanham Th√©oden para a batalha ou ficam para proteger o Condado e o Anel.",
    [
      { texto: "Acompanhar Th√©oden na batalha em Helm's Deep", proximaPagina: 38 },
      { texto: "Ficar e proteger o Anel, evitando se envolver na guerra", proximaPagina: 81 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    38,
    "No campo de batalha de Helm's Deep, a noite √© escura e a tens√£o √© m√°xima. O ex√©rcito de Saruman se aproxima. Cada decis√£o que Frodo toma pode afetar a sobreviv√™ncia do grupo. Voc√™s precisam escolher se defendem a entrada principal ou patrulham os muros laterais, onde os ataques podem ser menos previs√≠veis.",
    [
      { texto: "Defender a entrada principal, enfrentando a maior amea√ßa", proximaPagina: 39 },
      { texto: "Patrulhar os muros laterais, esperando ataques menores", proximaPagina: 80 }
    ]
  )
);

addPagina(
  new PaginaBatalha(
    39,
    "Os Uruk-hai avan√ßam em for√ßa total. Frodo sente a press√£o do Anel, mas a coragem surge. Lutas intensas acontecem, e cada movimento √© crucial. A batalha √© ca√≥tica, mas a estrat√©gia e a uni√£o do grupo podem fazer a diferen√ßa.",
    new UrukHai(),
    [],
    40
  )
);

addPagina(
  new PaginaExploracao(
    40,
    "Ap√≥s a batalha, o grupo de Frodo consegue resistir ao ataque inicial, mas as for√ßas de Saruman n√£o cessam. O futuro de Rohan ainda √© incerto, e o grupo deve decidir os pr√≥ximos passos: refor√ßar a cidade ou seguir viagem para continuar a miss√£o do Anel. Cada escolha carrega riscos e consequ√™ncias graves.",
    [
      { texto: "Refor√ßar a defesa de Rohan, ajudando a popula√ß√£o e ex√©rcitos", proximaPagina: 41 },
      { texto: "Seguir imediatamente com a miss√£o do Anel, confiando em aliados", proximaPagina: 79 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    41,
    "Voc√™s deixam Rohan e seguem rumo a Mordor, passando pelas Terras Negras. O sol √© pouco, o ar pesado, e cada passo √© uma prova de resist√™ncia. Sam mant√©m Frodo firme, mas o peso do Anel aumenta com cada dia. Voc√™s encontram rastros de Gollum, que parece estar os seguindo. Devem decidir se o confrontam ou tentam usar sua ajuda.",
    [
      { texto: "Confrontar Gollum imediatamente, sem confiar nele", proximaPagina: 42 },
      { texto: "Aceitar Gollum como guia, apesar da desconfian√ßa", proximaPagina: 43 }
    ]
  )
);

addPagina(new PaginaMorte(42, "Gollum, ofendido e tra√≠do, alerta Sauron sobre sua presen√ßa. Voc√™s s√£o atacados por Orcs enquanto atravessam a sombra de Mordor. A miss√£o termina tragicamente."));

addPagina(
  new PaginaExploracao(
    43,
    "Gollum guia voc√™s por caminhos secretos, evitando patrulhas e armadilhas. Mas sua ambi√ß√£o pelo Anel √© vis√≠vel em cada olhar. Frodo precisa manter vigil√¢ncia constante. Voc√™s chegam √†s portas de Cirith Ungol, onde Shelob, a aranha gigante, aguarda. A decis√£o √© crucial: enfrentar a aranha ou buscar caminho alternativo, arriscando atrasos e perigos desconhecidos.",
    [
      { texto: "Enfrentar Shelob diretamente, confiando em coragem e ast√∫cia", proximaPagina: 44 },
      { texto: "Tentar contornar o caminho por um desvio desconhecido", proximaPagina: 78 }
    ]
  )
);

addPagina(
  new PaginaBatalha(
    44,
    "Shelob ataca com velocidade e veneno mortal. Frodo sente a press√£o do Anel aumentando. A luta exige estrat√©gia, cuidado e coragem. Sam age com bravura para proteger Frodo, garantindo que a miss√£o continue.",
    new Shelob(),
    [],
    45
  )
);

addPagina(
  new PaginaExploracao(
    45,
    "Ap√≥s escapar de Shelob, voc√™s entram nas profundezas de Cirith Ungol. O ambiente √© escuro, √∫mido e cheio de armadilhas. Orcs patrulham constantemente. Cada passo √© vital para n√£o serem descobertos. A escolha √© seguir direto pelo caminho principal ou procurar passagens alternativas, mais seguras, mas mais longas.",
    [
      { texto: "Seguir pelo caminho principal, arriscando encontros com Orcs", proximaPagina: 46 },
      { texto: "Explorar passagens alternativas, mais longas mas possivelmente seguras", proximaPagina: 77 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    46,
    "Voc√™s chegam √†s plan√≠cies finais pr√≥ximas ao Monte da Perdi√ß√£o. A lava e o calor tornam cada passo doloroso. Frodo sente o Anel quase vivo, sussurrando para ser colocado de volta. Sam observa preocupado, e a escolha agora √© se Frodo continua sozinho ou com Sam ao lado, ajudando a resistir √† tenta√ß√£o.",
    [
      { texto: "Seguir sozinho, tentando resistir √† influ√™ncia do Anel", proximaPagina: 47 },
      { texto: "Seguir com Sam, compartilhando o peso e o fardo", proximaPagina: 48 }
    ]
  )
);

addPagina(new PaginaMorte(47, "O poder do Anel √© forte demais. Frodo sucumbe √† tenta√ß√£o e se recusa a destru√≠-lo. Ele √© cercado por Sauron e Orcs, e a miss√£o falha definitivamente."));

addPagina(
  new PaginaExploracao(
    48,
    "Com Sam ao lado, voc√™s avan√ßam lentamente. O calor e a press√£o do Anel s√£o enormes. Voc√™s alcan√ßam a borda da cratera. O momento da decis√£o final chega: lan√ßar o Anel na lava ou hesitar, permitindo que o desejo de poder interfira.",
    [
      { texto: "Lan√ßar o Anel na lava e destruir o mal para sempre", proximaPagina: 49 },
      { texto: "Hesitar e manter o Anel consigo, cedendo √† tenta√ß√£o", proximaPagina: 47 }
    ]
  )
);

addPagina(
  new PaginaExploracao(
    49,
    "O Anel cai na lava, e uma onda de destrui√ß√£o se espalha por Mordor. O poder de Sauron se desfaz, e as for√ßas das trevas caem em desespero. Frodo e Sam s√£o sacudidos pelo calor, mas a miss√£o finalmente foi cumprida. A vit√≥ria √© agridoce: muitos sacrificaram suas vidas, mas a liberdade retorna √† Terra M√©dia.",
    [{ texto: "Retornar para o Condado e iniciar a vida ap√≥s a aventura", proximaPagina: 50 }]
  )
);

addPagina(
  new PaginaExploracao(
    50,
    "Voc√™s retornam ao Condado, onde a vida segue, mas nada ser√° como antes. Frodo carrega cicatrizes f√≠sicas e emocionais, lembran√ßas de coragem, perda e amizade. A jornada terminou, e a Terra M√©dia est√° segura, pelo menos por agora. A miss√£o do Anel se cumpriu, e a hist√≥ria de Frodo se encerra com triunfo e reflex√£o.",
    []
  )
);

// === P√°ginas de morte e finais alternativos adicionais ===
addPagina(new PaginaMorte(85, "O poder do Anel o consome. Voc√™ cai nas chamas."));
addPagina(new PaginaMorte(86, "Os Nazg√ªl sentem o Anel e o capturam."));
addPagina(new PaginaMorte(87, "As tropas de Sauron massacram voc√™ no port√£o negro."));
addPagina(new PaginaMorte(88, "Voc√™ se perde nos p√¢ntanos e morre afogado."));
addPagina(new PaginaMorte(89, "Sem Gollum, voc√™ n√£o encontra o caminho e √© capturado."));
addPagina(new PaginaMorte(90, "Boromir trai Frodo e toma o Anel."));
addPagina(new PaginaMorte(91, "Sem os presentes de Galadriel, voc√™s s√£o derrotados."));
addPagina(new PaginaMorte(92, "Fugindo do Balrog, todos caem no abismo."));
addPagina(new PaginaMorte(93, "A √°gua desperta o Guardi√£o do Lago e voc√™s morrem."));
addPagina(new PaginaMorte(94, "Sem Frodo, a Sociedade nunca parte. Sauron vence."));
addPagina(new PaginaMorte(95, "Os Nazg√ªl matam voc√™s facilmente."));
addPagina(new PaginaMorte(96, "Sem Aragorn, voc√™s s√£o ca√ßados e mortos."));
addPagina(new PaginaMorte(97, "Sozinho, voc√™ cai numa armadilha dos Nazg√ªl."));
addPagina(new PaginaMorte(98, "Os Cavaleiros Negros encontram voc√™s dormindo."));
addPagina(new PaginaMorte(99, "Sauron encontra o Anel no Condado. O mundo cai nas sombras."));

// ==================== Loop Principal ====================
import * as readlineSync from "readline-sync";

let paginaAtualId = 1;

while (true) {
  const pagina = paginas[paginaAtualId];

  if (!pagina) {
    console.log("P√°gina n√£o encontrada! O jogo vai terminar.");
    break;
  }

  const resultado = pagina.executar();

  
  if (resultado !== null && typeof resultado === "number") {
    paginaAtualId = resultado;
    continue;
  }

  
  if (pagina.escolhas.length === 0) {
    console.log("\nFim da aventura!");
    break;
  }

  
  const escolha = readlineSync.question("Escolha uma op√ß√£o (n√∫mero): ");
  const indice = parseInt(escolha, 10) - 1;

  if (isNaN(indice) || indice < 0 || indice >= pagina.escolhas.length) {
    console.log("Escolha inv√°lida, tente novamente.");
    continue;
  }

  const escolhaSelecionada = pagina.escolhas[indice];
  paginaAtualId = escolhaSelecionada.proximaPagina;
}
